# Resumo da Aula: AWS Cost Explorer e Ferramentas de Gerenciamento de Custos

## Introdução
Nesta aula, o professor finaliza o módulo de **Cost Management** com uma visão geral do **AWS Cost Explorer**, destacando sua capacidade de detalhar gastos por serviço, região, tipo de instância ou tags, com granularidade diária, mensal ou por hora. Ele também apresenta duas ferramentas open-source, **OpenCost** e **Cast AI**, para monitoramento de custos em clusters Kubernetes, com foco em desacoplamento e otimização. A aula encerra com uma transição para o próximo módulo sobre **Blue-Green Deployments**, revisitando ferramentas como **Argo Rollouts**.

## Conteúdo Principal

### AWS Cost Explorer
- **Funcionalidade**:
  - Ferramenta da AWS para análise detalhada de custos, exibindo gastos totais dos últimos 6 meses (máximo).
  - Permite filtragem por:
    - **Serviço**: Ex.: EC2 ($0.80), EKS ($1.24).
    - **Região**: Identifica regiões com maior/menor gasto.
    - **Tipo de Instância**: Ex.: T3 Nano vs. T3 Medium.
    - **Tags**: Filtra por tags aplicadas aos recursos.
    - **Granularidade**: Mensal, diária ou horária (limitada a 14 dias para horária, dependendo do volume de dados).
  - Exemplo: O professor tentou visualizar gastos por hora, mas a baixa utilização da conta impediu a geração do gráfico.
- **Benefícios**:
  - Visualização detalhada (ex.: gráficos de gastos diários ou mensais).
  - Identificação de **anomalias de custo** (ex.: picos inesperados) e possíveis causas (*potential root cause*).
  - Monitoramento do **Free Tier** da AWS para acompanhar o uso de serviços gratuitos.
- **Uso Prático**:
  - Útil para auditorias e otimizações, permitindo splits por serviço ou região.
  - Suporta automações (ex.: relatórios de anomalias ou exportação para S3).
- **Limitação**:
  - Para desenvolvedores, pode não ser uma ferramenta de uso diário, mas é crítica para evangelizar áreas sobre controle de custos, já que impacta a saúde financeira da organização.

### Ferramentas Open-Source
1. **OpenCost**:
   - **Descrição**: Ferramenta open-source para monitoramento de custos em clusters Kubernetes (EKS, AKS, GKE, OCI).
   - **Instalação**:
     - Configurada em um cluster Kubernetes (ex.: EKS com Prometheus) para coletar métricas de custo.
     - Requer permissões específicas para acessar dados da cloud.
   - **Benefícios**:
     - **Desacoplamento**: Não depende de ferramentas específicas da cloud (AWS, Azure, GCP), permitindo uso em múltiplos provedores.
     - **Portabilidade**: Facilita migrações entre clouds, pois a estrutura é independente.
     - **UI Própria**: Similar ao Cost Explorer, mas gerenciada pelo usuário, com detalhes sobre uso do cluster.
     - **Exportação**: Dados podem ser enviados para buckets S3 para análises ou relatórios.
   - **Uso**: Ideal para quem busca uma solução unificada e detalhada, especialmente para custos de Kubernetes.
2. **Cast AI**:
   - **Descrição**: Ferramenta para otimização de custos em Kubernetes, com versão open-source e planos pagos.
   - **Funcionalidades**:
     - Usa inteligência artificial para prever e otimizar gastos.
     - Suporta otimizações de bancos de dados (ex.: caching, índices) e clusters Kubernetes.
     - Usada por empresas como Hugging Face para gerenciar custos de modelos de IA.
   - **Diferença com OpenCost**:
     - Menos desacoplada, pois depende do vendor Cast AI.
     - Oferece recursos avançados (ex.: otimização de modelos de IA), mas com dependência proprietária.
   - **Benefício**: Focado em Kubernetes, oferece insights específicos (ex.: EKS) que o Cost Explorer não detalha.

### Conexão com Governança
- **AWS Cost Explorer**:
  - Complementa o **IaC** e **Budgets** ao fornecer visibilidade detalhada para auditorias.
  - Exemplo: Identificar que EC2 gastou $0.80 ajuda a revisar recursos via IaC para otimização.
- **OpenCost e Cast AI**:
  - Reforçam a governança ao oferecer monitoramento independente, especialmente para clusters Kubernetes.
  - Exemplo: OpenCost instalado em um EKS pode detalhar custos por namespace ou pod, facilitando alocação por BU.
- **Evangelização**:
  - Desenvolvedores devem promover o uso dessas ferramentas para conscientizar equipes sobre a criticidade do controle de custos.

### Próximos Passos
- Início do módulo de **Blue-Green Deployments**, revisitando ferramentas como **Argo Rollouts** (explorado no módulo de Feature Flags).
- Foco em estratégias de deploy avançadas, detalhando implementações práticas e ferramentas relacionadas.

### Boas Práticas
- **Uso do Cost Explorer**: Filtrar por serviço, região ou tags para auditorias regulares e identificação de anomalias.
- **Automações**: Configurar relatórios automatizados ou exportações para S3 para monitoramento contínuo.
- **OpenCost/Cast AI**: Testar em clusters Kubernetes para insights específicos, especialmente em EKS/AKS/GKE.
- **Tagueamento**: Aplicar tags aos recursos para facilitar filtragens no Cost Explorer (ex.: por BU ou projeto).
- **Evangelização**: Promover a cultura de monitoramento de custos entre equipes, mesmo para desenvolvedores.

## Conclusão
A aula finaliza o módulo de **Cost Management** com uma visão prática do **AWS Cost Explorer**, destacando sua capacidade de detalhar gastos e identificar anomalias. As ferramentas **OpenCost** e **Cast AI** são apresentadas como opções open-source para monitoramento de custos em Kubernetes, com foco em desacoplamento e otimização. A transição para o próximo módulo sobre **Blue-Green Deployments** reforça a conexão com práticas de DevOps, preparando para aprofundar em ferramentas como Argo Rollouts no stack da Rocketseat.