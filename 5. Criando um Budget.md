# Resumo da Aula: Configuração de Budget no AWS Budgets

## Introdução
Nesta aula, o professor guia a criação de um **budget** no **AWS Budgets**, utilizando um template para configurar um orçamento mensal de $5 com alertas para monitoramento de custos. Ele explica as opções de templates (Monthly, Daily, Savings, Zero Spend), a personalização por serviços (ex.: EKS), e a configuração de alertas baseados em porcentagens. A aula também oferece dicas práticas, como usar cartões virtuais com limites baixos para estudos, e antecipa a próxima aula, que abordará o **AWS Cost Explorer** para fechar o módulo de gerenciamento de custos.

## Conteúdo Principal

### Configuração de Budget no AWS Budgets
- **Acesso**:
  - No console da AWS, acessar **AWS Budgets** e selecionar **Create Budget**.
  - Opções: Usar um template (recomendado para simplicidade) ou customizar completamente.
- **Templates Disponíveis**:
  - **Zero Spend Budget**: Notifica gastos a partir de $0.01, ideal para contas novas ou testes.
  - **Savings Plan**: Monitora metas de economia (ex.: economizar X% por dia).
  - **Daily Budget**: Controle diário de gastos, útil para cenários críticos.
  - **Monthly Budget**: Controle mensal, usado no exemplo (recomendado para a maioria dos casos).
- **Passo a Passo (Monthly Budget)**:
  1. **Seleção do Template**:
     - Escolhido o template **Monthly Cost Budget**.
  2. **Configuração**:
     - **Nome**: Exemplo `Rocket`.
     - **Período**: Mensal (opções: diário, quadrimestral, anual).
     - **Tipo**: Recorrente (ou com expiração, ex.: até dezembro 2025).
     - **Valor**: $5/mês (fixo, mas pode ser auto-ajustável ou planejado).
     - **Início**: Setembro 2025 (configurado no contexto da gravação, fim de agosto 2025).
  3. **Filtros**:
     - Possível filtrar por dimensões, como:
       - **Availability Zone** (ex.: us-east-2a).
       - **Cost Category** (ex.: categorias personalizadas).
       - **Region** (ex.: Ohio).
       - **Service** (ex.: EKS, identificado como *Elastic Container Service for Kubernetes*).
     - Exemplo: Budget focado apenas em EKS, mostrando gastos de $0.99 e $1.24 em meses anteriores.
  4. **Alertas**:
     - Configurar *thresholds* (limites) para notificações:
       - 50% do budget ($2.50) para alerta inicial.
       - Baseado em gasto atual ou previsto (*forecasted*).
     - Notificações por e-mail, SNS (tópicos) ou AWS Chatbot.
  5. **Revisão e Criação**:
     - Após configuração, o budget é criado e aparece como *healthy* (saudável) se o gasto está dentro do limite.
     - Exemplo: Em setembro 2025, nenhum gasto registrado, então o budget está zerado, sem previsão (*forecast*).

- **Visualização**:
  - O AWS Budgets mostra o percentual do budget usado (ex.: 12% de $20 em um budget anterior do professor).
  - Compara com meses anteriores (ex.: $1.94, $0.45, $1.83, máximo de $3.58 em julho 2025).
  - Filtragem por serviço (ex.: EKS) reduz o valor exibido (ex.: $0.99-$1.24 apenas para EKS).

### Dicas Práticas
- **Cartões Virtuais para Estudos**:
  - Usar cartões virtuais com limites baixos (ex.: R$50) para evitar cobranças automáticas altas em POCs ou testes.
  - Caso o limite estoure, contatar o provedor (ex.: AWS Support) para explicar (ex.: recurso ocioso esquecido). Estornos são comuns, mas não garantidos.
- **Evitar Surpresas**:
  - Configurar alertas em porcentagens (ex.: 50%, 80%) para antecipar excessos e agir antes do final do mês.
  - Exemplo: Alerta em $2.50 (50% de $5) avisa sobre possíveis problemas.
- **Governança com IaC**:
  - Reforço: Usar **Infra as Code** (ex.: Pulumi, Terraform) facilita destruir recursos (ex.: `pulumi destroy`) após POCs, evitando custos recorrentes.
  - Exemplo: Um EC2 esquecido pode gerar $100/mês; com IaC, a remoção é um comando.

### Conexão com Governança
- **Budgets e IaC**:
  - Budgets complementam o IaC ao monitorar gastos e alertar sobre excessos, enquanto o IaC evita criações manuais descontroladas.
  - Exemplo: Um budget de $5 para EKS + IaC com revisões em PRs garante que novos clusters sejam aprovados e orçados corretamente.
- **Multi-Account**:
  - Reforçado o uso de contas separadas por BU para segregar custos (ex.: BU de Pagamentos com $5.000/mês).
  - Budgets podem ser configurados por conta ou serviço, aumentando a granularidade.

### Boas Práticas
- **Usar Templates**: Começar com templates (ex.: Monthly Budget) para simplicidade, evitando customizações complexas no início.
- **Filtros Específicos**: Aplicar filtros por serviço (ex.: EKS) ou região para monitorar gastos direcionados.
- **Alertas em Porcentagem**: Configurar thresholds em % (ex.: 50%, 80%) para escalabilidade com mudanças no budget.
- **Cartões com Limite**: Em estudos, usar cartões virtuais com limites baixos para proteção financeira.
- **Testar e Destruir**: Após POCs, usar IaC para remover recursos e evitar custos ociosos.

### Próximos Passos
- Explorar o **AWS Cost Explorer** na próxima aula para detalhar gastos por serviço e tendências.
- Finalizar o módulo de gerenciamento de custos, conectando com governança e práticas de DevOps.

## Conclusão
A aula detalha a criação de um **budget mensal** de $5 no AWS Budgets, usando o template *Monthly Cost Budget* com filtros para EKS e alertas em 50% ($2.50). A configuração é simples, com opções de notificação por e-mail/SNS e suporte a filtros por serviço ou região. Dicas como usar cartões virtuais e IaC reforçam a governança e evitam custos inesperados. A próxima aula abordará o **AWS Cost Explorer**, fechando o módulo de gerenciamento de custos no stack de DevOps da Rocketseat.